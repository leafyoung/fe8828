---
title: "FE8828 Programming Web Applications in Finance"
subtitle: "Week 1 <br> What's Internet? What's Web? <br> Launch into the Cloud <br> Catch-up with R"
author: "Dr. Yang Ye <br> <sub> <Email:yy@runchee.com> </sub>"
date: "Nov 02, 2017"
runtime: shiny
---

```{r setup, include=FALSE}
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE, fig.align="center", collapse = TRUE)
chunk <- "```"
inline <- function(x = "") paste0("`` `r ", x, "` ``")
```

# Introduction: Topics for Week 1-3
- Week 1:
    * What's Internet? What's Web?
    * Launch into the Cloud: AWS
    * R catch-up: R Markdown and Shiny layout
- Week 2:
    * Data manipulation, visualization, and web: part 1/2
- Week 3:
    * Data manipulation, visualization, and web: part 2/2

# Introduction: Topics for Week 4-6
- Week 4:
    * Finance application basics and cases
- Week 5:
    * Bitcoin and Blockchain
- Week 6:
    * Further topics of Blockchain
    * Presentation of Assignment: Web applicaiton.
- Week 7:
    * Presentation of Assignment: Blockchain.

# Introduction: Assingments
- Week 1: A static website. A front page, a about page and a description page in the cloud. (due on Week 2)
- Week 2: A dynamic website that can do CRUD. (due on Week 3)
- Week 3: A data-driven website that does data analytics.  (due on Week 4)
- Week 4: A finance-data application website. (due on Week 6)
- Week 5: Reading on Blockchain. (due on Week 7) Working on web assignment. (due on Week 6)
- Week 6: Reading of Blockchain. (due on Week 7)

# Introduction: Objective
1. Know the way of Internet: the network, the cloud and the application. 
2. Build real-world data-driven reports and dashboard, data visualization.
3. Latest Internet technology in cryptocurrency and payment system like Bitcoin and Blockchain.

Spectrum.
Data ->  Model -> Application

```{r, echo = FALSE, out.width = "20%"}
knitr::include_graphics("imgs/keep-calm-code-on.jpg")
```

# Lecture 01: What's Internet? What's Web?
## Content
- Network

# Network
```{r, echo = FALSE, out.width = "60%"}
knitr::include_graphics("imgs/Internet_map_1024.jpg")
```

# Network is to connect the dots
```{r, echo = FALSE, out.width = "50%"}
knitr::include_graphics("imgs/dot-to-dot-connect-the-dots.jpg")
```
Wrong version

# Network is to connect the dots
<center>![](imgs/network_connect_dots.jpg "Connect the dots"){width=45%}</center>

# What happens to a computer network?
We need to talk to each other.

Layout: Star v.s. inter-connected.

* In a fully inter-connected network, 

1. Information turns to Packet
<center>![](imgs/tcp_header.gif "Network packet"){width=75%}</center>

2. Protocol designs the packet
TCP/IP Protocol - Internet protocol suite
<center>![](imgs/tcp-ip.png "TCP/IP"){width=75%}</center>

3. Infrastructure is to route the packets to the destination.
<center>![](imgs/wireshark-packets.jpg "Wireshark capture of the network"){width=75%}</center>

# What makes Internet work!
Internet is a super network of the world that connects devices.
Why the Internet succeeded?
What does TCP/IP gives?
IP address
```{r, echo = FALSE, out.width = "40%"}
knitr::include_graphics("imgs/internet-partial.png")
```
IPv4 => IPv6.

The Defense Advanced Research Projects Agency (DARPA), the research branch of the U.S. Department of Defense, created the TCP/IP model in the 1970s for use in ARPANET, a wide area network that preceded the internet.

Four layer approach:
<center>![](imgs/640px-UDP_encapsulation.svg.png "TCP/IP"){width=75%}</center>

Locally efficient but not very smart. Tries to be very smart.
leaves space for improvement. Every equipment manufacturer can improve.
Scalable.

# Layered structure:
Low level address

What happens after the cable is plugged in?
<center>![](imgs/cables-plug.jpg "Plug into the network"){width=75%}</center>

* Every network device has a hardware address
* 
When a computer connects to the network, the DHCP client, generally a component of the operating system sends out a DHCP request and recieves an offer from a DHCP server. The offer generally contains:

An IP Address
A subnet mask for that IP address

A gateway that should be used for off-network requests (like those going via the internet)
One or more DNS server addresses so the computer knows where to send DNS requests.
Connecting to a Router

When you plug your computer into a router or associate your wireless adapter with an access point, the computer will usually receive a DHCP response directly from the router, which may itself have requested an IP from the ISP for the interface the modem uses. it will then route traffic from the computer via it's interface connected to the modem where appropriate.

# Image of network plug/wireless network/fibre/underwater fiber.

# DHCP/DNS/Gateway
Home networking guide.

# HTTP(S) protocols

# HTML and WWW

_www._ used be a popular prefix to the website. E.g. www.yahoo.com. Together with _ftp._, _gopher._. It means the domain is serving different services. www for Web, ftp for FTP, gopher for Gopher (you don't what it is).
However, that era is gone. Now it is abbreviated, google.com, facebook.com, uber.com. Not www.....

XML grew out of the document markup world. 

# URL

# To recap
Browser down to HTML/CSS/JavaScript => HTTP => TCP => IP => Network physical.

# Web application
- Why?
- Needless to say. this is not 1995 anymore.

- Easy to develop, no need to compile like C++
- Easy to use, to deployment
- Cross-platform.
- Mobile phone. native app v.s. html.



3.	Development Tools

4.	Amazon Web Services:
4.1.	How to setup S3 for storage, EC2 for virtual machine, Route 53 for DNS.
Reading: TBC
Assignment:
+ Setup a website with AWS.
+ Write a markdown document and publish it website.
+ Use JavaScript to manipulate web page parts

Use programming language to process and present data	Know how to program R and JavaScript for data-driven interactive applications

+ Logic thinking of data processing technical.
+ Clarity in data visualization
+ Dealing the complexity of handling user-interaction.


# Lecture 02: AWS

AWS ways of signing up
* Sign-up with an AWS acccount
* Sign-up AWS Educate acccount
* Apply credit from AWS Educate
* Claim credit from AWS

1. With their own AWS account
Students will need to either create a new AWS account or use one that they've already created. Their AWS account needs to be fully activated by completing phone verification steps and adding a valid credit card. They will need to select the AWS Account option and enter their 12 digit AWS Account ID number when they apply to AWS Educate.
Upon approval, they will be sent a Welcome email with a credit code and important information about their AWS Educate benefits. They can redeem the credit code from the Welcome email to their AWS account. Once the credit has been redeemed to their AWS account, it will automatically be applied to any charges incurred by eligible services they launch as part of your course instructions, until the credit balance has been exhausted or expires. Students will receive a renewal code every 12 months that they are eligible for the program; they will not need to reapply.

2. AWS Educate Starter Account:
A valid credit card is not required for this option. The Starter Account is created for the student and managed by a 3rd party, qwikLABS. The credit is included on the Starter account, and the account will shut down automatically once the credit balance has been exhausted.
Upon approval, students will be sent a Welcome email with a link to set up their password and a second link to bookmark for future logins. Once logged in, they will need to follow the steps in the Starter Account Overview [attached to this case] to access their Starter account and use AWS resources.

Disclaimer:
1. I am not working for Amazon and I don't get paid by this.
2. I am not owning Amazon shares directly and indirectly.
3. I don't plan to long AMZN during the course of this course.
4. I will do a demo for Google Cloud.

Use FBI....
Warning:
You may be charged for using AWS EC2.
Free Tier applies to t1.micro.

# Lecture 03: R Markdown and Shiny layout
## Introduction
<center>![](imgs/Markdown-mark.svg.png "Markdown")</center>

Document is the basis for internet, which we usually call them web _page_.
We write words, put pictures in a document.
Also, we write application in a document.
- *Markdown* is a format that is easy to read and can be converted to other formats, HTML, PDF, Word, Slides.
- R Studio extends it further to create R notebook, interactive document and web application, which is *R Markdown*.
- Shiny is a web programming framework in R. We use it extensively in this course. We begin with the layout part.

# Markdown
HTML is a markup language. It means it "adds" something to the text to decorate it. 

    markup
    /ˈmɑːkʌp/
    noun
    1. the amount added to the cost price of goods to cover overheads and profit.
    "a mark-up of 50 per cent"
    2. the process or result of correcting text in preparation for printing.

Markdown is a language is that it adds minimal to the text to decorate it, created by John Gruber in collaboration with Aaron Swartz in 2004.

  A Markdown-formatted document should be publishable as-is, as plain text, without looking like it's been marked up with tags or formatting instructions. - John Gruber

# Markdown example

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("../example/markdown-example.md"))
```

# Markdown doc example
```{r, echo = FALSE, out.height = "70%"}
knitr::include_graphics("imgs/markdown-doc-preview.png")
```

# Markdown Elements 1

## Header

```{r echo = FALSE, comment = ""}
cat("# Header1\n## Header2\n### Header3\n")
```

## Code
Give four spaces before it
```{r echo = FALSE, comment = ""}
cat("    if (a > 0) {\n      print(a)\n    }\n")
```

    if (a > 0) {
      print(a)
    }

# Markdown Elements 2

## List

    * First paragraph.
    Continued.

    * Second paragraph. With a code block, which must be indented
    eight spaces:

            { code }

```{r, echo = FALSE, out.width = "12%"}
knitr::include_graphics("imgs/professortocat.png")
```

* First paragraph.
Continued.

* Second paragraph. With a code block, which must be indented
eight spaces:

        { code }

# Markdown Elements 3

## Multi-level lists
Put four more spaces for each level.

    * fruits
        + apples
            - macintosh
            - red delicious
        + pears
        + peaches
    * vegetables
        + broccoli
        + chard

* fruits
    + apples
        - macintosh
        - red delicious
    + pears
* vegetables
    + broccoli
    + chard

# Ordered Lists
Put 4 more spaces for each level.

    #. Chapter 1
        #. Section 1.1
        #. Section 1.2
    #. Chapter 2
    #. Chapter 3

```{r, echo = FALSE, out.width = "12%"}
knitr::include_graphics("imgs/professortocat.png")
```

#. Chapter 1
    #. 1.1
    #. 1.2
#. Chapter 2
#. Chapter 3

# Table

    | Tables        | Are           | Cool  |
    | ------------- |:-------------:| -----:|
    | col 3 is      | right-aligned | $1600 |
    | col 2 is      | centered      |   $12 |
    | zebra stripes | are neat      |    $1 |

```{r, echo = FALSE, out.width = "12%"}
knitr::include_graphics("imgs/professortocat.png")
```

| Tables        | Are           | Cool  |
| ------------- |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |

# Inline formatting

1. Emphasis
To emphasize some text, surround it with *s or _, like this:

    This text is \_emphasized with underscores\_, and this
    is \*emphasized with asterisks\*.
    Double * or _ produces strong emphasis:

    This text is _emphasized with underscores_, and this
    is *emphasized with asterisks*.
    Double * or _ produces strong emphasis:

    This is \*\*strong emphasis\*\* and \_\_with underscores\_\_.

    This is **strong emphasis** and __with underscores__.
    A * or _ character surrounded by spaces, or backslash-escaped, will not trigger emphasis:

2. Strikthrough

    This \~\~is deleted text.\~\~

    This ~~is deleted text.~~

3. Superscripts and subscripts

    H\~2\~O is a liquid.  2\^10\^ is 1024.

    H~2~O is a liquid.  2^10^ is 1024.

4. Verbatim. inline code. Use backtick \`>>=\`

What is the difference between `>>=` and `>>`?
If the verbatim text includes a backtick, use double backticks:

# Links

<http://google.com>

# Images

A link immediately preceded by a ! will be treated as an image. The link text will be used as the image’s alt text:

    ![Pizza](imgs/bitcoin-pizza.png)

![Pizza](imgs/bitcoin-pizza.png){width=75%}

# Formula
MathJax. Use laTex syntax. You may find many online resources.

## Inline with text

    $x = {-b \pm \sqrt{b^2-4ac} \over 2a}$

$x = {-b \pm \sqrt{b^2-4ac} \over 2a}$

## Centered

    $$\sum_{i=1}^n X_i$$

$$\sum_{i=1}^n X_i$$

# R Markdown
## Reference in R Studio
- R Markdown Cheat Sheet: Help > Cheatsheets > R Markdown Cheat Sheet,
- R Markdown Reference Guide: Help > Cheatsheets > R Markdown Reference Guide.

## Create it via File > New File > R Markdown.
- Document
- Presentation
- Shiny

# R Markdown Document example
```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("../example/rmd-example-doc.Rmd"))
```

Output:

- html_document
- pdf_document
- word_document

# Code block for R Markdown
* R Markdown is a extension to Markdown that you can execute code among the code. (Not only R, but Python, etc.)
If you name the file as __.Rmd__ and _knit_ in R Studio.

        `r chunk`{r chunk_name}
        a <- 3
        b <- 4
        print(a + b)
        `r chunk`

  ```{r chunk_name}
  a <- 3
  b <- 4
  print(a + b)
  ```

* The chunk_name is optional; if included, each code chunk needs a distinct name.
It’s usually best to give each code chunk a name, for easier debug.

* R code can also be inline. For example, to generate a random number everytime, include this \`runif(1, 0, 1)\`, `r runif(1, 0, 1)`

# R Markdown example

    `r chunk`{r kable}
    knitr::kable(
      mtcars[1:5, ], 
      caption = "A knitr kable."
    )
    `r chunk`

    `r chunk`{r plot1, echo = FALSE}
    a <- filter(cars, speed > 4)
    plot(a)
    `r chunk`

# R Markdown result

```{r kable}
knitr::kable(
  mtcars[1:5, ], 
  caption = "A knitr kable."
)
```

```{r plot1, echo = FALSE}
a <- filter(cars, speed > 4)
plot(a)
```

# chunk options

    `r chunk`{r cars, echo = TRUE}
    a <- runif(100, 0, 1)
    `r chunk`

    `r chunk`{r plot}
    plot(a)
    `r chunk`

Result
```{r cars, echo = TRUE}
a <- runif(100, 0, 1)
```

```{r plot, echo = FALSE, out.width = "30%"}
plot(a)
```

* _echo_ is to decide whether to display code, default is FALSE.
* _result_ is to decide whether to display result, default is show, set to "hide" to hide.
* _include_ is to hide both code and result, default is FALSE.

# R Shiny
Just about layout and some R Syntax

# HTML UI

# add static content
    tags$h1()
    tags$a()
    tagList()

# Panel

    titlePanel("Hello Shiny!")

    wellPanel(actionButton("goButton", "Go!"))

    tabPanel("tab 1")

    tabsetPanel(
      tabPanel("Plot", plotOutput("plot")), 
      tabPanel("Summary", verbatimTextOutput("summary")), 
      tabPanel("Table", tableOutput("table"))
    )

    navlistPanel(
      tabPanel("tab1", "contents"),
      tabPanel("tab2", "contents"),
      tabPanel("tab3", "contents")
    )

# HTML layout

    ui <- fluidPage(
      fluidRow(column(3),
              column(5)),
      fluidRow(column(4), offset = 8)
      )

# Sidebar layout - Prepacked layout

    fluidPage(sidebarLayout(
      sidebarPanel(),
      mainPanel()
    ))

    fluidPage(
      titlePanel("Hello Shiny!"),
      sidebarLayout(
        sidebarPanel(
          sliderInput("obs", "Number of observations:",
                      min = 1, max = 1000, value = 500)
        ),
        mainPanel(
          plotOutput("distPlot")
        )
      )
    )

# Sidebar layout with bar on the right

$ul("About")

  fluidPage(
    sidebarLayout(position = "right",
      sidebarPanel(
        tags$ul("About"),
        tags$li("Who are we"),
        tags$li("What we do")
      )
    )
  )

# Column-based layout
Caveat: There is fluidRow, but no fluidColumn.

Column counts always add up to 12, 4 + 8.

    fluidPage(
      fluidRow(
        column(2, "sidebar" ),
        column(10, "main" )
      )
    )

    fluidPage(
      titlePanel("Hello Shiny!"),
      fluidRow(
        column(4,
          wellPanel(
            dateInput("date", "How's weather today?")
          )
        ),
        column(8,
          h3("Plot")
          plotOutput("distPlot")
        )
      )
    )

# Composition layout: Top and Down

    fluidPage(
      title = "Diamonds Explorer",
      img(),
      hr(),
      
      fluidRow(
        column(3,
          h4("Diamonds Explorer"),
          sliderInput('sampleSize', 'Sample Size', 
                      min=1, max=nrow(dataset), value=min(1000, nrow(dataset)), 
                      step=500, round=0),
          br(),
          checkboxInput('jitter', 'Jitter'),
          checkboxInput('smooth', 'Smooth')
        ),
        column(4, offset = 1,
          selectInput('x', 'X', names(dataset)),
          selectInput('y', 'Y', names(dataset), names(dataset)[[2]]),
          selectInput('color', 'Color', c('None', names(dataset)))
        ),
        column(4,
          selectInput('facet_row', 'Facet Row', c(None='.', names(dataset))),
          selectInput('facet_col', 'Facet Column', c(None='.', names(dataset)))
        )
      )
    )

# Navlist panel

    fluidPage( 
      titlePanel("Application Title"),

      navlistPanel(
        "Header A",
        tabPanel("Component 1"),
        tabPanel("Component 2"),
        "Header B",
        tabPanel("Component 3"),
        tabPanel("Component 4"),
        "-----",
        tabPanel("Component 5")
      )
    )

# NavbarPanel

    navbarPage(title = "title",
      tabPanel("tab 1", "content"),
      tabPanel("tab 2", "content"),
      navbarMenu(title = "title",
        tabPanel("tab 3", "content"),
        tabPanel("tab 3", "content")
      )
    )

# 2nd secondary

    navbarPage("My Application",
      tabPanel("Component 1"),
      tabPanel("Component 2"),
      navbarMenu("More",
        tabPanel("Sub-Component A"),
        tabPanel("Sub-Component B"))
    )

# R Markdown Shiny example

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("../example/shiny-mfe-example.Rmd"))
```

```{r, echo = FALSE}
wellPanel("Inputs",
          numericInput("fav_num", "What's your favorite number?", 3))
```

# Assignments

